webpackJsonp([2],{"/G0/":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});l("PJh5");var a=l("cMGX"),r=l("mvHQ"),s=l.n(r),i={props:{title:{type:String,default:"添加样本"},rowData:{type:Object,default:function(){return{}}}},data:function(){return{dialogVisible:!1,ruleForm:{id:"",code:"",name:"",sex:"",age:"",uid:"",disease:"",history:"",clinical:"",sample:"",status:"",test:"",sampling:"",receiving:new Date,unit:"",submitter:"",phone:"",remarks:""},rules:{code:[{required:!0,message:"请填入条形码",trigger:"blur"},{min:8,max:12,message:"长度在 8 到 12 个字符",trigger:"blur"}],name:[{required:!0,message:"请填入客户姓名",trigger:"blur"},{min:2,max:5,message:"长度在 2 到 5 个字符",trigger:"blur"}],submitter:[{required:!0,message:"请填入送检人",trigger:"blur"},{min:2,max:5,message:"长度在 2 到 5 个字符",trigger:"blur"}],call:[{required:!0,message:"请输入联系方式",trigger:"blur"},{min:11,max:11,message:"请输入正确联系方式",trigger:"blur"}],sample:[{required:!0,message:"请选择样本类型",trigger:"change"}],status:[{required:!0,message:"请选择样本状态",trigger:"change"}],sex:[{required:!0,message:"请选择客户性别",trigger:"change"}],test:[{required:!0,message:"请选择检测项目",trigger:"change"}]},options:[{value:"单基因遗传病检测",label:"单基因遗传病检测",children:[{value:"α地中海贫血基因检测",label:"α地中海贫血基因检测"},{value:"β地中海贫血基因检测",label:"β地中海贫血基因检测"},{value:"先天性耳聋基因检测",label:"先天性耳聋基因检测"}]},{value:"胚胎植入前遗传学检测",label:"胚胎植入前遗传学检测",children:[{value:"PGT-A",label:"PGT-A"},{value:"PGT-SR",label:"PGT-SR"},{value:"PGT-M",label:"PGT-M"}]}]}},watch:{rowData:function(e){console.log("监听数据变化"),this.ruleForm=e}},methods:{handleClose:function(){var e=this;this.$confirm("确认关闭？").then(function(t){e.close()}).catch(function(e){})},close:function(){this.dialogVisible=!1,this.$parent.http(1)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("提交失败!"),!1;"添加样本"==t.title&&(t.ruleForm.test=s()(t.ruleForm.test),t.$api.addSample(t.ruleForm).then(function(e){200==e.data.status&&t.$message({message:"提交成功!",type:"success"})})),"编辑样本"==t.title&&(t.ruleForm.test=s()(t.ruleForm.test),t.$api.editSample(t.ruleForm).then(function(e){200==e.data.status&&t.$message({message:"编辑成功!",type:"success"})}))})},resetForm:function(e){this.$refs[e].resetFields()}}},o={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"50%",top:"5vh","close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px",size:"mini"}},[l("el-row",[l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"条形码",prop:"code"}},[l("el-input",{model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"样本类型",prop:"sample"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择样本类型"},model:{value:e.ruleForm.sample,callback:function(t){e.$set(e.ruleForm,"sample",t)},expression:"ruleForm.sample"}},[l("el-option",{attrs:{label:"EDTA抗凝血",value:"EDTA抗凝血"}}),e._v(" "),l("el-option",{attrs:{label:"口腔粘膜",value:"口腔粘膜"}}),e._v(" "),l("el-option",{attrs:{label:"流产组织",value:"流产组织"}}),e._v(" "),l("el-option",{attrs:{label:"胚胎滋养层细胞",value:"胚胎滋养层细胞"}}),e._v(" "),l("el-option",{attrs:{label:"子宫内膜组织",value:"子宫内膜组织"}})],1)],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"姓名",prop:"name"}},[l("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"样本状态",prop:"status"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择样本状态"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},[l("el-option",{attrs:{label:"合格",value:"合格"}}),e._v(" "),l("el-option",{attrs:{label:"不合格",value:"不合格"}}),e._v(" "),l("el-option",{attrs:{label:"未知",value:"未知"}})],1)],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"性别",prop:"sex"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择性别"},model:{value:e.ruleForm.sex,callback:function(t){e.$set(e.ruleForm,"sex",t)},expression:"ruleForm.sex"}},[l("el-option",{attrs:{label:"男",value:"男"}}),e._v(" "),l("el-option",{attrs:{label:"女",value:"女"}}),e._v(" "),l("el-option",{attrs:{label:"未知",value:"未知"}})],1)],1)],1),e._v(" "),l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"检测项目",prop:"test"}},[l("el-cascader",{staticStyle:{width:"100%"},attrs:{"show-all-levels":!1,options:e.options,props:{multiple:!0,checkStrictly:!1},clearable:""},model:{value:e.ruleForm.test,callback:function(t){e.$set(e.ruleForm,"test",t)},expression:"ruleForm.test"}})],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"年龄",prop:"age"}},[l("el-input",{model:{value:e.ruleForm.age,callback:function(t){e.$set(e.ruleForm,"age",t)},expression:"ruleForm.age"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"采样日期",prop:"sampling"}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.sampling,callback:function(t){e.$set(e.ruleForm,"sampling",t)},expression:"ruleForm.sampling"}})],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"证件号码",prop:"uid"}},[l("el-input",{model:{value:e.ruleForm.uid,callback:function(t){e.$set(e.ruleForm,"uid",t)},expression:"ruleForm.uid"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"收样日期",prop:"receiving"}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",disabled:""},model:{value:e.ruleForm.receiving,callback:function(t){e.$set(e.ruleForm,"receiving",t)},expression:"ruleForm.receiving"}})],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"现病史",prop:"disease"}},[l("el-input",{model:{value:e.ruleForm.disease,callback:function(t){e.$set(e.ruleForm,"disease",t)},expression:"ruleForm.disease"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"送检单位",prop:"unit"}},[l("el-input",{model:{value:e.ruleForm.unit,callback:function(t){e.$set(e.ruleForm,"unit",t)},expression:"ruleForm.unit"}})],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"家族病史",prop:"history"}},[l("el-input",{model:{value:e.ruleForm.history,callback:function(t){e.$set(e.ruleForm,"history",t)},expression:"ruleForm.history"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"送检人",prop:"submitter"}},[l("el-input",{model:{value:e.ruleForm.submitter,callback:function(t){e.$set(e.ruleForm,"submitter",t)},expression:"ruleForm.submitter"}})],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"临床诊断",prop:"clinical"}},[l("el-input",{model:{value:e.ruleForm.clinical,callback:function(t){e.$set(e.ruleForm,"clinical",t)},expression:"ruleForm.clinical"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:11}},[l("el-form-item",{attrs:{label:"联系方式",prop:"phone"}},[l("el-input",{model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:22}},[l("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"备注信息",prop:"remarks"}},[l("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.remarks,callback:function(t){e.$set(e.ruleForm,"remarks",t)},expression:"ruleForm.remarks"}})],1)],1)],1),e._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),l("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var n=l("VU/8")(i,o,!1,function(e){l("jzHa")},"data-v-79b0d918",null).exports,u={components:{Pagination:a.a,DialogSample:n},data:function(){return{input:"",tableData:[],total:10,pageSize:1,type:1,dialogVisible:!1,currentPage:1,title:"添加样本",rowData:{}}},methods:{changePage:function(e){this.currentPage=e,1==this.type?(this.http(e),console.log("样本列表")):(this.tableData=this.list.slice(3*(e-1),3*e),console.log("搜索列表"))},AddSample:function(){this.title="添加样本",this.$refs.dialog.dialogVisible=!0},changeDialog:function(){this.dialogVisible=!1},handleEdit:function(e,t){this.$refs.dialog.dialogVisible=!0,this.title="编辑样本",t.test=JSON.parse(t.test),this.rowData=t},handleDelete:function(e,t){var l=this;this.$confirm("此操作将彻底删除样本信息，是否继续?","提示",{confirmButtonText:"确定",cancelButton:"取消",type:"warning"}).then(function(){l.$api.delSample({id:t.id}).then(function(e){200==e.data.status?(l.http(1),l.$message({message:"删除成功!",type:"success"})):l.$message.error("删除失败!")})}).catch(function(){l.$message({type:"info",message:"已取消删除!"})})},searchInput:function(e){var t=this;if(this.currentPage=1,!(e=this.input))return this.http(1),void(this.type=1);this.$api.getSearchSample({search:e}).then(function(e){200==e.data.status?(t.total=e.data.result.length,t.tableData=e.data.result.slice(0,3),t.$date.dateFilter(e.data.result),t.list=e.data.result,t.type=2):(t.tableData=[],t.total=1,t.pageSize=1)})},http:function(e){var t=this;this.$api.getSampleList({page:e}).then(function(e){200==e.data.status&&(t.$date.dateFilter(e.data.data),t.tableData=e.data.data,t.total=e.data.total,t.pageSize=e.data.pageSize)})}},created:function(){this.http(1)}},c={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{id:"sample"}},[l("div",{attrs:{id:"header"}},[l("el-input",{attrs:{placeholder:"请输入内容"},on:{change:e.searchInput},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.searchInput}},[e._v("查询样本")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.AddSample}},[e._v("添加样本")])],1),e._v(" "),l("div",{attrs:{id:"wrapper"}},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"cell-style":{textAlign:"center"},"header-cell-style":{textAlign:"center"}}},[l("el-table-column",{attrs:{type:"selection",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"code",label:"条形码",width:"150"}}),e._v(" "),l("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),e._v(" "),l("el-table-column",{attrs:{prop:"sex",label:"性别",width:"120"}}),e._v(" "),l("el-table-column",{attrs:{prop:"sample",label:"样本类型",width:"150"}}),e._v(" "),l("el-table-column",{attrs:{prop:"test",label:"检测项目",width:"150","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{prop:"receiving",label:"收样日期",width:"150"}}),e._v(" "),l("el-table-column",{attrs:{prop:"unit",label:"送检单位",width:"180","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{prop:"",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{size:"mini"},on:{click:function(l){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),l("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(l){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),l("Pagination",{attrs:{total:e.total,pageSize:e.pageSize,currentPage:e.currentPage},on:{changePage:e.changePage}}),e._v(" "),l("DialogSample",{ref:"dialog",attrs:{title:e.title,rowData:e.rowData}})],1)},staticRenderFns:[]};var m=l("VU/8")(u,c,!1,function(e){l("1kb7")},"data-v-0a970c20",null);t.default=m.exports},"1kb7":function(e,t){},jzHa:function(e,t){},mvHQ:function(e,t,l){e.exports={default:l("qkKv"),__esModule:!0}},qkKv:function(e,t,l){var a=l("FeBl"),r=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}}});
//# sourceMappingURL=2.76479ab75d8b2ea418a5.js.map